---
const currentLang = Astro.url.pathname.split('/')[1] || 'en';
interface Props {
    appId: string;
    apiKey: string;
    indexName: string;
    container?: string;
    language?: string;
    debug?: boolean;
    maxResultsPerGroup?:number;
}

const {
    appId="SOXMYGAM7C",
    apiKey="a520bc515d8e08ed1284ecd7340b6b1e",
    indexName="nocobase" + "_" + currentLang,
    container = '.docsearch-nocobase',
    language= currentLang,
    debug = false,
    maxResultsPerGroup = 20
} = Astro.props;
---

<script is:inline src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script
        is:inline
        type="text/javascript"
        define:vars={{
            appId,
            apiKey,
            indexName,
            container,
            language,
            debug,
            maxResultsPerGroup
        }}
        data-astro-rerun
>
    docsearch({
        appId: appId,
        apiKey: apiKey,
        indexName: indexName,
        container: container,
        language: language,
        debug: debug,
        maxResultsPerGroup:maxResultsPerGroup,
    });
</script>
